{% extends 'base.html' %}

{% block title %}Donations - MetaBrainz Foundation{% endblock %}

{% block content %}
  <h2>Donations</h2>

  {% if not donations %}
    No donations. :(
  {% else %}
    <table class="table table-hover">
      <thead>
      <tr>
        <th>Date</th>
        <th>Donor</th>
        <th>Donation</th>
        <th>Fee</th>
      </tr>
      </thead>
      <tbody>
      {% for donation in donations %}
        <tr>
          <td>{{ donation.timestamp }}</td>
          <td>
            {% if donation.anonymous %}
              (anonymous)
            {% else %}
              {{ donation.first_name }} {{ donation.last_name }}
              {% if donation.moderator %}
                (<a href="//musicbrainz.org/user/{{ donation.moderator }}">{{ donation.moderator }}</a>)
              {% endif %}
            {% endif %}
          </td>
          <td>${{ donation.amount }}</td>
          <td>${{ donation.fee }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>

    {% if count > limit %}
      <ul class="pager">
        {% if page > 1 %}
          <li class="previous"><a href="{{ url_for('finances.donations', page=page-1) }}">&larr;</a></li>
        {% endif %}
        {% if page-1 < count//limit %}
          <li class="next"><a href="{{ url_for('finances.donations', page=page+1) }}">&rarr;</a></li>
        {% endif %}
      </ul>
    {% endif %}
  {% endif %}
{% endblock %}
